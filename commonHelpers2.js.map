{"version":3,"file":"commonHelpers2.js","sources":["../src/js/storage/filters.js","../src/js/helper/control-lists-view.js","../src/js/dom/init-lists-view.js","../src/js/api/fetch-filters.js","../src/js/dom/filter_exersices.js","../src/js/api/get-exercises-by-keyword.js","../src/js/dom/handle-search.js","../src/js/helper/clear-element.js","../src/js/events/clear-search.js","../src/js/events/submit-search.js","../src/js/helper/add-text.js","../src/js/dom/handle-group-click.js","../src/js/events/clickOnFilterCard.js","../src/js/events/initial-exercise-list.js"],"sourcesContent":["const CURRENT_EXERCISES_FILTER_PAGE = 'current-exercises-filter-page';\nconst CURRENT_EXERCISES_FILTER_KEYWORD = 'current-exercises-filter-keyword';\nconst CURRENT_EXERCISES_GROUP_NAME = 'current-exercises-group-name';\nconst IS_OPENED_EXERCISES_LIST = 'is-opened-exercises-list';\n\nexport const filtersService = {\n  checkIsOpenExercisesList: () => {\n    return sessionStorage.getItem(IS_OPENED_EXERCISES_LIST) === 'true';\n  },\n  openExercisesList: () => {\n    sessionStorage.setItem(IS_OPENED_EXERCISES_LIST, 'true');\n  },\n  closeExercisesList: () => {\n    sessionStorage.setItem(IS_OPENED_EXERCISES_LIST, 'false');\n  },\n\n  exercisesFilters: {\n    set: filter => {\n      sessionStorage.setItem(CURRENT_EXERCISES_FILTER_KEYWORD, filter);\n    },\n    get: () => {\n      return (\n        sessionStorage.getItem(CURRENT_EXERCISES_FILTER_KEYWORD) ?? 'Muscles'\n      );\n    },\n  },\n\n  exercisesGroups: {\n    set: name => {\n      sessionStorage.setItem(CURRENT_EXERCISES_GROUP_NAME, name);\n    },\n    get: () => {\n      return sessionStorage.getItem(CURRENT_EXERCISES_GROUP_NAME) ?? '';\n    },\n  },\n\n  exercisesFiltersTable: {\n    setPage: page => {\n      sessionStorage.setItem(CURRENT_EXERCISES_FILTER_PAGE, page.toString());\n    },\n    getPage: () => {\n      const value = sessionStorage.getItem(CURRENT_EXERCISES_FILTER_PAGE);\n      return value ? Number(value) : 1;\n    },\n  },\n};\n","import { refs } from '../refs';\nimport { filtersService } from '../storage/filters';\n\nexport const openExercisesList = () => {\n  filtersService.openExercisesList();\n  refs.exercisesFiltersList.classList.add('visually-hidden');\n  refs.exercisesFiltersPagination.classList.add('visually-hidden');\n  refs.searchFormElement.classList.remove('visually-hidden');\n  refs.exercisesContainer.classList.remove('visually-hidden');\n};\n\nexport const closeExercisesList = () => {\n  filtersService.closeExercisesList();\n  refs.exercisesFiltersList.classList.remove('visually-hidden');\n  refs.exercisesFiltersPagination.classList.remove('visually-hidden');\n  refs.searchFormElement.classList.add('visually-hidden');\n  refs.exercisesContainer.classList.add('visually-hidden');\n};\n","import { filtersService } from '../storage/filters';\n\nimport {\n  openExercisesList,\n  closeExercisesList,\n} from '../helper/control-lists-view';\n\nconst isOpenExercisesList = filtersService.checkIsOpenExercisesList();\n\nif (isOpenExercisesList) {\n  openExercisesList();\n} else {\n  closeExercisesList();\n}\n","import { apiInstance } from './config';\n\nexport const fetchFilters = ({ page, filter }) =>\n  apiInstance.get(`/filters?page=${page}&filter=${filter}`);\n","import Pagination from 'tui-pagination';\n\nimport { fetchFilters } from '../api/fetch-filters';\nimport { filtersService } from '../storage/filters';\nimport { refs } from '../refs';\nimport { closeExercisesList } from '../helper/control-lists-view';\n\nconst initPage = filtersService.exercisesFiltersTable.getPage();\nconst initFilter = filtersService.exercisesFilters.get();\n\n// initial fetch and setup pagination\ngetInitFiltersExercises({ page: initPage, filter: initFilter });\n\n// set initFilter;\nrefs.exercisesFiltersTabsList.forEach(elem => {\n  const textContent = elem.textContent.trim();\n  if (textContent === initFilter) {\n    elem.classList.add('active');\n  }\n});\n\nfunction getInitFiltersExercises({ page, filter }) {\n  fetchFilters({ page, filter }).then(\n    ({ data: { results, page, perPage, totalPages } }) => {\n      const pagination = new Pagination('exercises-filters-pagination', {\n        page: Number(page),\n        itemsPerPage: perPage,\n        totalItems: totalPages * perPage,\n      });\n\n      pagination.on('beforeMove', function (eventData) {\n        const currentFilter = filtersService.exercisesFilters.get();\n\n        getFiltersExercisesForNewPage(currentFilter, eventData.page);\n        filtersService.exercisesFiltersTable.setPage(eventData.page);\n      });\n\n      displayExercises(results);\n    }\n  );\n}\n\nfunction getFiltersExercisesForNewPage(filter, page) {\n  fetchFilters({ page, filter }).then(({ data }) => {\n    displayExercises(data.results);\n    scrollToTop();\n  });\n}\n\nfunction displayExercises(results) {\n  refs.exercisesFiltersList.innerHTML = '';\n\n  const markup = results\n    .map(({ filter, name, imgURL }) => {\n      const dataFilter = `data-filter=\"${filter}\"`;\n      const dataGroupName = `data-group=\"${name}\"`;\n\n      return `\n  <li class=\"filters__item\" ${dataFilter} ${dataGroupName}>\n    <img class=\"filters__img-first\" src=\"${imgURL}\"  ${dataFilter} ${dataGroupName}></img>\n    <div class=\"filters__wrapper-first\" ${dataFilter}${dataGroupName}>\n    <h2 class=\"filters__title-first\" ${dataFilter} ${dataGroupName}>${name}</h2>\n    <p class=\"filters__text-first\" ${dataFilter} ${dataGroupName}>${filter}</p>\n    </div>\n  </li>\n    `;\n    })\n    .join('');\n\n  refs.exercisesFiltersList.insertAdjacentHTML('beforeend', markup);\n}\n\n// filter tabs logic\n\nrefs.exercisesFiltersTabs.addEventListener('click', event => {\n  refs.exercisesFiltersTabsList.forEach(elem => {\n    elem.classList.remove('active');\n  });\n\n  event.target.classList.add('active');\n\n  const newFilter = event.target.textContent.trim();\n  refs.exercisesFiltersList.innerHTML = '';\n  closeExercisesList();\n\n  filtersService.exercisesFilters.set(newFilter);\n  filtersService.exercisesFiltersTable.setPage(1);\n\n  getInitFiltersExercises({ page: 1, filter: newFilter });\n});\n\nfunction scrollToTop() {\n  window.scrollTo({\n    top: 830,\n    behavior: 'auto',\n  });\n}\n","import { apiInstance } from './config';\n\n// Function sends get request by using filters saved in local storage and keywords from user input\nexport const getExercisesByKeyword = ({\n  filter,\n  group,\n  keyword = '',\n  page = 1,\n}) => {\n  // Create dynamic parameters for get request based on active filter\n  let params = new URLSearchParams({\n    //Active filter parametr\n    [filter]: group,\n    // Search input data\n    keyword,\n    page,\n    limit: 10,\n  });\n\n  return apiInstance.get(`/exercises?${params}`);\n};\n","import { getExercisesByKeyword } from '../api/get-exercises-by-keyword';\n\nimport { refs } from '../refs';\nimport { filtersService } from '../storage/filters';\nimport renderExercisesList from './render-exercises-list';\n\nexport default async function handleSearchSubmit(element) {\n  // Prevent page reload\n  element.preventDefault();\n\n  let filter = filtersService.exercisesFilters.get().toLowerCase();\n  let group = filtersService.exercisesGroups.get().toLowerCase();\n\n  filter = filter.toLowerCase().split(' ').join('');\n  if (filter === 'bodyparts') {\n    filter = filter.slice(0, -1);\n  }\n  group = group.toLowerCase();\n\n  // Clear spaces and capital letters from user input\n  const keyword =\n    element.currentTarget.elements.search.value.trim().toLowerCase() ?? '';\n\n  const responseData = await getExercisesByKeyword({\n    filter,\n    group,\n    keyword,\n  });\n\n  // Render exercises list\n  renderExercisesList(refs.exercisesContainer, responseData.data.results);\n}\n","// Clear input field of selected element\nexport default function clearElement(element) {\n  if (element.value) {\n    element.value = '';\n    return;\n  }\n}\n","import { refs } from '../refs';\nimport { getExercisesByKeyword } from '../api/get-exercises-by-keyword';\nimport renderExercisesList from '../dom/render-exercises-list';\nimport { filtersService } from '../storage/filters';\n\nimport clearElement from '../helper/clear-element';\n\nexport default refs.searchClearButton.addEventListener('click', e => {\n  clearElement(refs.searchInputElement);\n\n  const filter = filtersService.exercisesFilters.get().toLowerCase();\n  const group = filtersService.exercisesGroups.get().toLowerCase();\n\n  getExercisesByKeyword({\n    filter,\n    group,\n    keyword: '',\n  }).then(responseData => {\n    renderExercisesList(refs.exercisesContainer, responseData.data.results);\n  });\n});\n","import { refs } from '../refs';\n\nimport handleSearchSubmit from '../dom/handle-search';\n\nexport default refs.searchFormElement.addEventListener('submit', e => {\n  handleSearchSubmit(e);\n});\n","// Add text to element and show divider in breadcrumbs\nexport default function addText(element, text, divider) {\n  element.innerText = text;\n  if (!divider) {\n    return;\n  }\n  divider.style.visibility = 'visible';\n}\n","import { getExercisesByKeyword } from '../api/get-exercises-by-keyword';\nimport renderExercisesList from './render-exercises-list';\nimport { refs } from '../refs';\nimport addText from '../helper/add-text';\n\nexport default async function handleGroupClick(container, filter, group) {\n  const responseData = await getExercisesByKeyword({ filter, group });\n\n  addText(refs.breadcrumbsText, group, refs.breadcrumbsDivider);\n  // Render exercises list\n  renderExercisesList(container, responseData.data.results);\n}\n","import { refs } from '../refs';\n\nimport { openExercisesList } from '../helper/control-lists-view';\nimport { filtersService } from '../storage/filters';\n\nimport handleGroupClick from '../dom/handle-group-click';\n\nrefs.exercisesFiltersList.addEventListener('click', e => {\n  let filter = e.target.dataset.filter;\n  let group = e.target.dataset.group;\n  filter = filter.toLowerCase().split(' ').join('');\n  if (filter === 'bodyparts') {\n    filter = filter.slice(0, -1);\n  }\n  group = group.toLowerCase();\n  if (filter && group) {\n    openExercisesList();\n    filtersService.exercisesGroups.set(group);\n    handleGroupClick(refs.exercisesContainer, filter, group);\n  }\n});\n","import { filtersService } from '../storage/filters';\n\nimport { refs } from '../refs';\n\nimport { getExercisesByKeyword } from '../api/get-exercises-by-keyword';\nimport renderExercisesList from '../dom/render-exercises-list';\nimport addText from '../helper/add-text';\n\nexport default async function initialExercisesList() {\n  let filter = filtersService.exercisesFilters.get();\n  let group = filtersService.exercisesGroups.get();\n\n  filter = filter.toLowerCase().split(' ').join('');\n  if (filter === 'bodyparts') {\n    filter = filter.slice(0, -1);\n  }\n  group = group.toLowerCase();\n\n  const responseData = await getExercisesByKeyword({ filter, group });\n\n  addText(refs.breadcrumbsText, group, refs.breadcrumbsDivider);\n  // Render exercises list\n  renderExercisesList(refs.exercisesContainer, responseData.data.results);\n}\n\ninitialExercisesList();\n"],"names":["CURRENT_EXERCISES_FILTER_PAGE","CURRENT_EXERCISES_FILTER_KEYWORD","CURRENT_EXERCISES_GROUP_NAME","IS_OPENED_EXERCISES_LIST","filtersService","filter","name","page","value","openExercisesList","refs","closeExercisesList","isOpenExercisesList","fetchFilters","apiInstance","initPage","initFilter","getInitFiltersExercises","elem","results","perPage","totalPages","Pagination","eventData","currentFilter","getFiltersExercisesForNewPage","displayExercises","data","scrollToTop","markup","imgURL","dataFilter","dataGroupName","event","newFilter","getExercisesByKeyword","group","keyword","params","handleSearchSubmit","element","responseData","renderExercisesList","clearElement","addText","text","divider","handleGroupClick","container","initialExercisesList"],"mappings":"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"}