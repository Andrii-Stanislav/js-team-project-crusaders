{"version":3,"file":"commonHelpers2.js","sources":["../src/js/storage/filters.js","../src/js/helper/control-lists-view.js","../src/js/dom/init-lists-view.js","../src/js/api/fetch-filters.js","../src/js/dom/filter_exersices.js","../src/js/events/clickOnFilterCard.js"],"sourcesContent":["const CURRENT_EXERCISES_FILTER_PAGE = 'current-exercises-filter-page';\nconst CURRENT_EXERCISES_FILTER_KEYWORD = 'current-exercises-filter-keyword';\nconst IS_OPENED_EXERCISES_LIST = 'is-opened-exercises-list';\n\nexport const filtersService = {\n  checkIsOpenExercisesList: () => {\n    return sessionStorage.getItem(IS_OPENED_EXERCISES_LIST) === 'true';\n  },\n  openExercisesList: () => {\n    sessionStorage.setItem(IS_OPENED_EXERCISES_LIST, 'true');\n  },\n  closeExercisesList: () => {\n    sessionStorage.setItem(IS_OPENED_EXERCISES_LIST, 'false');\n  },\n\n  exercisesFilters: {\n    set: filter => {\n      sessionStorage.setItem(CURRENT_EXERCISES_FILTER_KEYWORD, filter);\n    },\n    get: () => {\n      return (\n        sessionStorage.getItem(CURRENT_EXERCISES_FILTER_KEYWORD) ?? 'Muscles'\n      );\n    },\n  },\n\n  exercisesFiltersTable: {\n    setPage: page => {\n      sessionStorage.setItem(CURRENT_EXERCISES_FILTER_PAGE, page.toString());\n    },\n    getPage: () => {\n      const value = sessionStorage.getItem(CURRENT_EXERCISES_FILTER_PAGE);\n      return value ? Number(value) : 1;\n    },\n  },\n};\n","import { refs } from '../refs';\nimport { filtersService } from '../storage/filters';\n\nexport const openExercisesList = () => {\n  filtersService.openExercisesList();\n  refs.exercisesFiltersList.classList.add('visually-hidden');\n  refs.exercisesFiltersPagination.classList.add('visually-hidden');\n  refs.searchFormElement.classList.remove('visually-hidden');\n  refs.exercisesContainer.classList.remove('visually-hidden');\n};\n\nexport const closeExercisesList = () => {\n  filtersService.closeExercisesList();\n  refs.exercisesFiltersList.classList.remove('visually-hidden');\n  refs.exercisesFiltersPagination.classList.remove('visually-hidden');\n  refs.searchFormElement.classList.add('visually-hidden');\n  refs.exercisesContainer.classList.add('visually-hidden');\n};\n","import { filtersService } from '../storage/filters';\n\nimport {\n  openExercisesList,\n  closeExercisesList,\n} from '../helper/control-lists-view';\n\nconst isOpenExercisesList = filtersService.checkIsOpenExercisesList();\n\nif (isOpenExercisesList) {\n  openExercisesList();\n} else {\n  closeExercisesList();\n}\n","import { apiInstance } from './config';\n\nexport const fetchFilters = ({ page, filter }) =>\n  apiInstance.get(`/filters?page=${page}&filter=${filter}`);\n","import Pagination from 'tui-pagination';\n\nimport { fetchFilters } from '../api/fetch-filters';\nimport { filtersService } from '../storage/filters';\nimport { refs } from '../refs';\nimport { closeExercisesList } from '../helper/control-lists-view';\n\nconst initPage = filtersService.exercisesFiltersTable.getPage();\nconst initFilter = filtersService.exercisesFilters.get();\n\n// initial fetch and setup pagination\ngetInitFiltersExercises({ page: initPage, filter: initFilter });\n\n// set initFilter;\nrefs.exercisesFiltersTabsList.forEach(elem => {\n  const textContent = elem.textContent.trim();\n  if (textContent === initFilter) {\n    elem.classList.add('active');\n  }\n});\n\nfunction getInitFiltersExercises({ page, filter }) {\n  fetchFilters({ page, filter }).then(\n    ({ data: { results, page, perPage, totalPages } }) => {\n      const pagination = new Pagination('exercises-filters-pagination', {\n        page: Number(page),\n        itemsPerPage: perPage,\n        totalItems: totalPages * perPage,\n      });\n\n      pagination.on('beforeMove', function (eventData) {\n        const currentFilter = filtersService.exercisesFilters.get();\n\n        getFiltersExercisesForNewPage(currentFilter, eventData.page);\n        filtersService.exercisesFiltersTable.setPage(eventData.page);\n      });\n\n      displayExercises(results);\n    }\n  );\n}\n\nfunction getFiltersExercisesForNewPage(filter, page) {\n  fetchFilters({ page, filter }).then(({ data }) => {\n    displayExercises(data.results);\n    scrollToTop();\n  });\n}\n\nfunction displayExercises(results) {\n  refs.exercisesFiltersList.innerHTML = '';\n\n  const markup = results\n    .map(({ filter, name, imgURL }) => {\n      const dataFilter = `data-filter=\"${name}\"`;\n\n      return `\n  <li class=\"filters__item\" ${dataFilter}>\n    <img class=\"filters__img-first\" src=\"${imgURL}\"  ${dataFilter}></img>\n    <div class=\"filters__wrapper-first\" ${dataFilter}>\n    <h2 class=\"filters__title-first\" ${dataFilter}>${filter}</h2>\n    <p class=\"filters__text-first\" ${dataFilter}>${name}</p>\n    </div>\n  </li>\n    `;\n    })\n    .join('');\n\n  refs.exercisesFiltersList.insertAdjacentHTML('beforeend', markup);\n}\n\n// filter tabs logic\n\nrefs.exercisesFiltersTabs.addEventListener('click', event => {\n  refs.exercisesFiltersTabsList.forEach(elem => {\n    elem.classList.remove('active');\n  });\n\n  event.target.classList.add('active');\n\n  const newFilter = event.target.textContent.trim();\n  refs.exercisesFiltersList.innerHTML = '';\n  closeExercisesList();\n\n  filtersService.exercisesFilters.set(newFilter);\n  filtersService.exercisesFiltersTable.setPage(1);\n\n  getInitFiltersExercises({ page: 1, filter: newFilter });\n});\n\nfunction scrollToTop() {\n  window.scrollTo({\n    top: 830,\n    behavior: 'auto',\n  });\n}\n","import { refs } from '../refs';\n\nimport { openExercisesList } from '../helper/control-lists-view';\n\nrefs.exercisesFiltersList.addEventListener('click', e => {\n  const data = e.target.dataset.filter;\n  if (data) {\n    openExercisesList();\n  }\n});\n"],"names":["CURRENT_EXERCISES_FILTER_PAGE","CURRENT_EXERCISES_FILTER_KEYWORD","IS_OPENED_EXERCISES_LIST","filtersService","filter","page","value","openExercisesList","refs","closeExercisesList","isOpenExercisesList","fetchFilters","apiInstance","initPage","initFilter","getInitFiltersExercises","elem","results","perPage","totalPages","Pagination","eventData","currentFilter","getFiltersExercisesForNewPage","displayExercises","data","scrollToTop","markup","name","imgURL","dataFilter","event","newFilter"],"mappings":"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"}